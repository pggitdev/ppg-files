<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infographic สรุปค่าใช้จ่ายปี 2568 - ดีไซน์ใหม่</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #f8fafc; /* Slate 50 */
        }
        .gradient-text {
            background: linear-gradient(to right, #0d9488, #0f766e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>
<body>
    <div class="container mx-auto p-4 md:p-10 max-w-6xl">

        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold gradient-text">ประมาณการรายจ่ายประจำปี 2568</h1>
            <p class="text-lg text-gray-500 mt-1">SENSE SAIMAI 56</p>
        </header>

        <!-- Key Metrics -->
        <section class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 flex items-center space-x-4">
                <div class="bg-teal-100 p-3 rounded-full">
                    <svg class="w-6 h-6 text-teal-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M12 8h.01M15 8h.01M15 14h.01M18 14h.01M18 11h.01M18 8h.01"></path></svg>
                </div>
                <div>
                    <p class="text-sm text-gray-500">รายจ่ายรวมทั้งสิ้น</p>
                    <p class="text-2xl font-bold text-gray-800">3,077,936.00</p>
                </div>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 flex items-center space-x-4">
                <div class="bg-red-100 p-3 rounded-full">
                    <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"></path></svg>
                </div>
                <div>
                    <p class="text-sm text-gray-500">ขาดดุล (เก็บได้ 100%)</p>
                    <p class="text-2xl font-bold text-red-600">(72,236.00)</p>
                </div>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 flex items-center space-x-4">
                 <div class="bg-red-100 p-3 rounded-full">
                    <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                </div>
                <div>
                    <p class="text-sm text-gray-500">ขาดดุล (เก็บได้ 95%)</p>
                    <p class="text-2xl font-bold text-red-600">(222,521.00)</p>
                </div>
            </div>
        </section>

        <!-- Chart Section -->
        <section class="bg-white p-6 md:p-8 rounded-xl shadow-md border border-gray-200 mb-10">
            <div class="flex flex-col items-center">
                <h2 class="text-2xl font-semibold text-gray-700 mb-4">สัดส่วนค่าใช้จ่าย</h2>
                <div class="relative w-full max-w-2xl h-80 md:h-96 mx-auto">
                    <canvas id="expenseChartV2"></canvas>
                </div>
            </div>
        </section>

        <!-- Table and Conclusion Section -->
        <section class="bg-white p-6 md:p-8 rounded-xl shadow-md border border-gray-200">
            <h2 class="text-2xl font-semibold text-gray-700 mb-4">รายละเอียดค่าใช้จ่าย</h2>
            <div class="overflow-x-auto">
                <table class="w-full text-left text-sm">
                    <thead class="sticky top-0 bg-white">
                        <tr class="border-b-2 border-gray-200">
                            <th class="py-3 text-gray-500 font-semibold">รายการ</th>
                            <th class="py-3 text-gray-500 font-semibold text-right">ประมาณการ (บาท)</th>
                        </tr>
                    </thead>
                    <tbody class="text-gray-600">
                        <!-- Category 1 -->
                        <tr class="font-semibold text-teal-800 bg-teal-50"><td colspan="2" class="p-3">หมวดที่ 1: ค่าใช้จ่ายตามสัญญา</td></tr>
                        <tr><td class="p-3 pl-5">ค่ารักษาความปลอดภัย</td><td class="p-3 text-right">1,052,880.00</td></tr>
                        <tr><td class="p-3 pl-5">ค่าบริหารจัดการดูแลผู้พักอาศัย</td><td class="p-3 text-right">642,000.00</td></tr>
                        <tr><td class="p-3 pl-5">งานแม่บ้านดูแลความสะอาด</td><td class="p-3 text-right">152,796.00</td></tr>
                        <tr><td class="p-3 pl-5">งานคนสวนดูแล และดูแลน้ำพุ</td><td class="p-3 text-right">410,880.00</td></tr>
                        <tr><td class="p-3 pl-5 border-b">ค่าบริการดูแลสระว่ายน้ำ</td><td class="p-3 text-right border-b">83,460.00</td></tr>
                        <tr class="font-semibold"><td class="p-3">รวมหมวดที่ 1</td><td class="p-3 text-right">2,342,016.00</td></tr>

                        <!-- Category 2 -->
                        <tr class="font-semibold text-teal-800 bg-teal-50"><td colspan="2" class="p-3">หมวดที่ 2: ค่าใช้จ่ายระบบสาธารณูปโภค</td></tr>
                        <tr><td class="p-3 pl-5">ค่าไฟฟ้าส่องสว่าง</td><td class="p-3 text-right">261,600.00</td></tr>
                        <tr><td class="p-3 pl-5">ค่าประปา</td><td class="p-3 text-right">4,200.00</td></tr>
                        <tr><td class="p-3 pl-5">ค่าโทรศัพท์ และ Internet</td><td class="p-3 text-right">2,200.00</td></tr>
                        <tr><td class="p-3 pl-5 border-b">ค่าจัดเก็บขยะในครัวเรือน</td><td class="p-3 text-right border-b">52,920.00</td></tr>
                        <tr class="font-semibold"><td class="p-3">รวมหมวดที่ 2</td><td class="p-3 text-right">320,920.00</td></tr>

                        <!-- Category 3 -->
                        <tr class="font-semibold text-teal-800 bg-teal-50"><td colspan="2" class="p-3">หมวดที่ 3: หมวดดำเนินการ</td></tr>
                        <tr><td class="p-3 pl-5">ค่าธรรมเนียมธนาคาร/บัตรเดบิต</td><td class="p-3 text-right">3,000.00</td></tr>
                        <tr><td class="p-3 pl-5">ค่าใช้จ่ายจัดประชุมใหญ่ฯ</td><td class="p-3 text-right">30,000.00</td></tr>
                        <tr><td class="p-3 pl-5">ค่าบริการงานพิเศษ นอกบ้าน</td><td class="p-3 text-right">24,000.00</td></tr>
                        <tr><td class="p-3 pl-5 border-b">ค่าตรวจสอบบัญชี</td><td class="p-3 text-right border-b">10,000.00</td></tr>
                        <tr class="font-semibold"><td class="p-3">รวมหมวดที่ 3</td><td class="p-3 text-right">67,000.00</td></tr>

                        <!-- Category 4 -->
                        <tr class="font-semibold text-teal-800 bg-teal-50"><td colspan="2" class="p-3">หมวดที่ 4: ค่าซ่อมแซมและบำรุงรักษา</td></tr>
                        <tr><td class="p-3 pl-5">ระบบไฟฟ้า</td><td class="p-3 text-right">18,000.00</td></tr>
                        <tr><td class="p-3 pl-5">ระบบกล้องวงจรปิด (CCTV)</td><td class="p-3 text-right">98,000.00</td></tr>
                        <tr><td class="p-3 pl-5">ระบบสระว่ายน้ำ</td><td class="p-3 text-right">24,000.00</td></tr>
                        <tr><td class="p-3 pl-5">งานปรับภูมิทัศน์</td><td class="p-3 text-right">108,000.00</td></tr>
                        <tr><td class="p-3 pl-5">ทรัพย์สินส่วนกลาง</td><td class="p-3 text-right">24,000.00</td></tr>
                        <tr><td class="p-3 pl-5">ระบบป้ายจราจร</td><td class="p-3 text-right">70,000.00</td></tr>
                        <tr><td class="p-3 pl-5 border-b">วัสดุอุปกรณ์งานช่าง</td><td class="p-3 text-right border-b">6,000.00</td></tr>
                        <tr class="font-semibold"><td class="p-3">รวมหมวดที่ 4</td><td class="p-3 text-right">348,000.00</td></tr>
                    </tbody>
                </table>
            </div>
            <!-- Conclusion -->
            <div class="mt-8 pt-6 border-t border-gray-200">
                <h3 class="font-semibold text-gray-700">ข้อสังเกตและสรุปผล</h3>
                <p class="text-gray-600 mt-2">จากข้อมูลประมาณการ พบว่า **ค่าใช้จ่ายตามสัญญา** เป็นสัดส่วนที่ใหญ่ที่สุด (76.09%) ของรายจ่ายทั้งหมด และเมื่อเปรียบเทียบรายจ่ายรวมกับประมาณการรายรับ จะเห็นได้ว่าโครงการมีแนวโน้ม **ขาดดุลทางการเงิน** ทั้งในกรณีที่เก็บค่าส่วนกลางได้ 100% และ 95% จึงมีความจำเป็นต้องพิจารณาทบทวนแผนการใช้จ่ายหรือหาแนวทางเพิ่มรายรับเพื่อรักษาสภาพคล่องของโครงการในระยะยาว</p>
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const ctx = document.getElementById('expenseChartV2').getContext('2d');
            
            const expenseData = {
                labels: [
                    'ค่าใช้จ่ายตามสัญญา', 
                    'ค่าใช้จ่ายระบบสาธารณูปโภค', 
                    'ค่าซ่อมแซมและบำรุงรักษา', 
                    'หมวดดำเนินการ'
                ],
                datasets: [{
                    data: [2342016.00, 320920.00, 348000.00, 67000.00],
                    backgroundColor: [
                        '#0d9488', // Teal 600
                        '#f59e0b', // Amber 500
                        '#3b82f6', // Blue 500
                        '#6366f1'  // Indigo 500
                    ],
                    borderColor: '#f8fafc',
                    borderWidth: 4,
                    hoverOffset: 12
                }]
            };

            const totalExpenses = expenseData.datasets[0].data.reduce((a, b) => a + b, 0);

            // Plugin to draw text in the center of the doughnut chart
            const centerTextPlugin = {
                id: 'centerText',
                afterDraw: (chart) => {
                    const { ctx, _active } = chart;
                    const chartArea = chart.chartArea;
                    if (!chartArea) return;
                    
                    ctx.save();
                    const centerX = (chartArea.left + chartArea.right) / 2;
                    const centerY = (chartArea.top + chartArea.bottom) / 2;

                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';

                    // Title
                    ctx.font = '600 14px Sarabun';
                    ctx.fillStyle = '#6b7280'; // Gray 500
                    ctx.fillText('รายจ่ายรวม', centerX, centerY - 15);

                    // Value
                    ctx.font = '700 24px Sarabun';
                    ctx.fillStyle = '#111827'; // Gray 900
                    const totalFormatted = new Intl.NumberFormat('th-TH', { maximumFractionDigits: 0 }).format(totalExpenses);
                    ctx.fillText(totalFormatted, centerX, centerY + 15);
                    ctx.restore();
                }
            };

            const expenseChart = new Chart(ctx, {
                type: 'doughnut',
                data: expenseData,
                plugins: [centerTextPlugin],
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: {
                            display: true,
                            position: 'bottom',
                            labels: {
                                font: {
                                    family: 'Sarabun',
                                    size: 14,
                                },
                                padding: 20,
                                usePointStyle: true,
                                pointStyle: 'circle'
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    const value = context.raw;
                                    const percentage = ((value / totalExpenses) * 100).toFixed(2);
                                    label += `${new Intl.NumberFormat('th-TH').format(value)} บาท (${percentage}%)`;
                                    return label;
                                }
                            },
                            backgroundColor: '#1f2937',
                            titleFont: { size: 14, family: 'Sarabun' },
                            bodyFont: { size: 12, family: 'Sarabun' },
                            padding: 10,
                            cornerRadius: 8,
                            usePointStyle: true,
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
